<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Productivity App - Login</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background: linear-gradient(to bottom, #a1c4fd, #c2e9fb);
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
    }
    #login-container {
        background-color: rgba(255,255,255,0.9);
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        width: 300px;
    }
    input { width: 90%; padding: 10px; margin: 8px 0; border-radius: 8px; border: 1px solid #ccc; }
    button {
        width: 95%;
        padding: 10px;
        margin: 10px 0;
        font-size: 16px;
        border-radius: 10px;
        border: none;
        cursor: pointer;
        background-color: #ff8c42;
        color: white;
    }
    button:hover { background-color: #ff7330; }
    #message { color: red; margin-top: 10px; font-weight: bold; }
</style>
</head>
<body>

<div id="login-container">
    <h2>Login / Signup</h2>
    <input type="email" id="email" placeholder="Email"><br>
    <input type="password" id="password" placeholder="Password"><br>
    <button onclick="signup()">Sign Up</button>
    <button onclick="login()">Log In</button>
    <div id="message"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // Firebase config (replace with your keys)
  const firebaseConfig = {
    apiKey: "AIzaSyD5tVw8vb6qZRDKJCyja0J09xE4iBwkjp8",
    authDomain: "myproductivityapp08.firebaseapp.com",
    projectId: "myproductivityapp08",
    storageBucket: "myproductivityapp08.firebasestorage.app",
    messagingSenderId: "303438110257",
    appId: "1:303438110257:web:27193360d76cff019a7f10"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  const messageEl = document.getElementById("message");

  // Sign up function
  function signup() {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    auth.createUserWithEmailAndPassword(email, password)
      .then((userCredential) => {
        messageEl.style.color = "green";
        messageEl.innerText = "Signup successful! Logging in...";
        // Redirect to dashboard or habit tracker page
        setTimeout(() => { window.location.href = "dashboard.html"; }, 1000);
      })
      .catch((error) => {
        messageEl.style.color = "red";
        messageEl.innerText = error.message;
      });
  }

  // Log in function
  function login() {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    auth.signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        messageEl.style.color = "green";
        messageEl.innerText = "Login successful!";
        setTimeout(() => { window.location.href = "dashboard.html"; }, 500);
      })
      .catch((error) => {
        messageEl.style.color = "red";
        messageEl.innerText = error.message;
      });
  }

  // Optional: auto redirect if already logged in
  auth.onAuthStateChanged((user) => {
    if (user) {
      window.location.href = "dashboard.html";
    }
  });
</script>

</body>
</html>
