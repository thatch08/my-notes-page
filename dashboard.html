<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Black Cat Productivity</title>
<style>
  /* DARK THEME */
  body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    background: #111;
    color: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }

  h1, h2 {
    text-align: center;
  }

  button {
    padding: 10px 20px;
    margin: 5px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background-color: #222;
    color: #fff;
    font-size: 16px;
    transition: transform 0.1s, background 0.2s;
  }
  button:hover { transform: scale(1.1); background-color: #444; }

  input {
    padding: 8px;
    border-radius: 8px;
    border: none;
    margin: 5px;
    width: 60%;
  }

  hr { border: 1px solid #333; width: 80%; margin: 20px 0; }

  /* GOALS */
  #goal-list .goal-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 5px 0;
    background: #222;
    padding: 8px 12px;
    border-radius: 8px;
  }

  .progress-bar {
    width: 100%;
    background: #333;
    border-radius: 8px;
    overflow: hidden;
    height: 12px;
    margin: 5px 0;
  }
  .progress {
    height: 100%;
    background: #f39c12;
    width: 0%;
    transition: width 0.5s;
  }

  /* POMODORO TIMER */
  #pomodoro-container {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 20px auto;
  }

  #pomodoro-svg {
    transform: rotate(-90deg);
  }

  circle {
    fill: none;
    stroke-width: 15;
    stroke-linecap: round;
  }
  #bg-circle { stroke: #333; }
  #progress-circle { stroke: #f39c12; stroke-dasharray: 565; stroke-dashoffset: 565; transition: stroke-dashoffset 1s linear; }

  #timer-display {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 32px;
  }

  /* BLACK CAT ANIMATION */
  #cat {
    position: relative;
    width: 80px;
    height: 80px;
    margin: 20px auto;
  }
  #cat-body {
    width: 80px;
    height: 80px;
    background: #000;
    border-radius: 40px 40px 20px 20px;
    position: relative;
    transition: transform 0.3s;
  }
  #cat-ear-left, #cat-ear-right {
    width: 20px; height: 20px;
    background: #000;
    position: absolute;
    top: -10px;
    border-radius: 50% 50% 0 0;
    transform: rotate(45deg);
  }
  #cat-ear-left { left: 10px; }
  #cat-ear-right { right: 10px; transform: rotate(-45deg); }
  #cat-tail {
    width: 12px; height: 60px;
    background: #000;
    position: absolute;
    bottom: 0;
    right: -10px;
    border-radius: 6px;
    transform-origin: bottom;
    animation: tail-swing 1s infinite alternate ease-in-out;
  }
  @keyframes tail-swing { 0% { transform: rotate(10deg); } 100% { transform: rotate(-10deg); } }
</style>
</head>
<body>

<h1>Black Cat Productivity</h1>

<!-- CAT ANIMATION -->
<div id="cat">
  <div id="cat-body">
    <div id="cat-ear-left"></div>
    <div id="cat-ear-right"></div>
    <div id="cat-tail"></div>
  </div>
</div>

<hr>

<!-- GOALS -->
<h2>Goals Tracker</h2>
<div>
  <input type="text" id="new-goal" placeholder="Add a new goal">
  <button onclick="addGoal()">➕ Add</button>
</div>
<div id="goal-list"></div>
<div class="progress-bar"><div id="goal-progress" class="progress"></div></div>

<hr>

<!-- POMODORO -->
<h2>Pomodoro Timer</h2>
<div id="pomodoro-container">
  <svg id="pomodoro-svg" width="200" height="200">
    <circle id="bg-circle" r="90" cx="100" cy="100"></circle>
    <circle id="progress-circle" r="90" cx="100" cy="100"></circle>
  </svg>
  <div id="timer-display">25:00</div>
</div>
<div>
  <button onclick="startPomodoro()">Start</button>
  <button onclick="stopPomodoro()">Stop</button>
</div>

<hr>

<button onclick="resetAllData()">Reset All Data</button>

<script>
// ---------- LOCAL STORAGE HELPERS ----------
function save(key, val){ localStorage.setItem(key, JSON.stringify(val)); }
function load(key, defaultVal){ return JSON.parse(localStorage.getItem(key)) || defaultVal; }

// ---------- GOALS ----------
function addGoal(){
  const name = document.getElementById("new-goal").value.trim();
  if(!name) return;
  const goals = load("goals", []);
  goals.push({name, done:false, streak:0, lastCompleted:null});
  save("goals", goals);
  document.getElementById("new-goal").value="";
  loadGoals();
}

function loadGoals(){
  const list = document.getElementById("goal-list");
  list.innerHTML = "";
  const goals = load("goals", []);
  goals.forEach((goal,i)=>{
    const div = document.createElement("div");
    div.className = "goal-item";
    div.innerHTML = `<span>${goal.name} (Streak: ${goal.streak})</span>
                     <button onclick="toggleGoal(${i})">${goal.done?"✅":"⬜"}</button>`;
    list.appendChild(div);
  });
  updateGoalProgress(goals);
  animateCat(goals);
}

function toggleGoal(i){
  const goals = load("goals", []);
  const today = new Date().toDateString();
  const g = goals[i];
  if(!g.done && g.lastCompleted!==today) g.streak++;
  g.done = !g.done;
  g.lastCompleted = g.done ? today : g.lastCompleted;
  save("goals", goals);
  animateCat(goals);
  loadGoals();
}

function updateGoalProgress(goals){
  const total = goals.length;
  const done = goals.filter(g=>g.done).length;
  document.getElementById("goal-progress").style.width = total ? (done/total*100)+"%" : "0%";
}

// ---------- POMODORO ----------
let pomodoroTime = 25*60;
let pomodoroInterval = null;
let progressCircle = document.getElementById("progress-circle");

function startPomodoro(){
  if(pomodoroInterval) return;
  let time = pomodoroTime;
  pomodoroInterval = setInterval(()=>{
    const min = Math.floor(time/60);
    const sec = time%60;
    document.getElementById("timer-display").innerText = `${min.toString().padStart(2,"0")}:${sec.toString().padStart(2,"0")}`;
    const pct = ((pomodoroTime - time)/pomodoroTime)*565;
    progressCircle.style.strokeDashoffset = 565 - pct;
    if(time===0){
      clearInterval(pomodoroInterval);
      pomodoroInterval=null;
      animateCat(); launchConfetti();
    }
    time--;
  },1000);
}

function stopPomodoro(){
  clearInterval(pomodoroInterval);
  pomodoroInterval=null;
}

// ---------- CAT ANIMATION ----------
function animateCat(goals){
  const cat = document.getElementById("cat-body");
  cat.style.transform = "translateY(-20px)";
  setTimeout(()=>{ cat.style.transform="translateY(0px)"; },400);
}

// ---------- CONFETTI ----------
function launchConfetti(){
  for(let i=0;i<30;i++){
    const c = document.createElement("div");
    c.style.width="10px"; c.style.height="10px";
    c.style.background=`hsl(${Math.random()*360},100%,50%)`;
    c.style.position="absolute";
    c.style.left=Math.random()*window.innerWidth+"px";
    c.style.top="0px";
    c.style.borderRadius="50%";
    document.body.appendChild(c);
    c.animate([{transform:"translateY(0px)"},{transform:"translateY(500px)"}],{duration:3000});
    setTimeout(()=>c.remove(),3000);
  }
}

// ---------- RESET ----------
function resetAllData(){
  if(confirm("Clear all goals and pomodoro progress?")){
    localStorage.clear();
    loadGoals();
    document.getElementById("timer-display").innerText="25:00";
    progressCircle.style.strokeDashoffset=565;
  }
}

// ---------- INIT ----------
loadGoals();
</script>

</body>
</html>
